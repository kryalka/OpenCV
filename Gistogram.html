<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Гистограммы в OpenCV</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="index.html">Главная</a></li>
            </ul>
        </nav>
    </header>
    <header>
        <h1>Гистограммы в OpenCV</h1>
    </header>
    <main>
        <section>
            <h2>Что такое гистограмма изображения?</h2>
            <p>
                Гистограмма изображения — это графическое представление распределения интенсивности пикселей в изображении. Она показывает, сколько пикселей на изображении имеют определённые значения яркости или цвета. 
                Гистограммы играют важную роль в обработке изображений, позволяя анализировать контраст, яркость и другие характеристики изображения.
            </p>
            <p>
                Гистограмма может быть представлена в одном, двух или трёх каналах: для чёрно-белых изображений (одноканальная гистограмма), для цветных (трёхканальная гистограмма — для каналов RGB или HSV).
            </p>
        </section>

        <section>
            <h2>Как создать гистограмму в OpenCV?</h2>
            <p>
                Для создания гистограммы изображения в OpenCV используется функция <code>cv2.calcHist()</code>. Она позволяет вычислить количество пикселей для каждого значения интенсивности в изображении.
            </p>
            <ul>
                <li><strong>Функция:</strong> <code>cv2.calcHist()</code></li>
                <li><strong>Параметры:</strong>
                    <ul>
                        <li><code>images</code>: Список изображений для расчёта гистограммы.</li>
                        <li><code>channels</code>: Каналы для анализа (0 для серого, 0,1,2 для RGB и т.д.).</li>
                        <li><code>mask</code>: Маска, ограничивающая область анализа (по умолчанию None).</li>
                        <li><code>histSize</code>: Число бинов (диапазонов значений для расчёта). Например, 256 для 8-битного изображения.</li>
                        <li><code>ranges</code>: Диапазон значений, который будет учитывать гистограмма (например, [0, 256] для 8-битного изображения).</li>
                    </ul>
                </li>
            </ul>
            <p>Пример кода для вычисления гистограммы:</p>
            <pre><code>
import cv2
import matplotlib.pyplot as plt

# Загружаем изображение
image = cv2.imread('image.jpg', cv2.IMREAD_GRAYSCALE)

# Вычисляем гистограмму
hist = cv2.calcHist([image], [0], None, [256], [0, 256])

# Отображаем гистограмму
plt.plot(hist)
plt.title('Гистограмма изображения')
plt.xlabel('Интенсивность пикселей')
plt.ylabel('Частота')
plt.show()
            </code></pre>
            <img src="photo/gray_new.jpg" alt="Сепарабельное размытие" width="500">
            <img src="photo/w1.png" alt="Сепарабельное размытие" width="500">
            <p>
                В этом примере создаётся гистограмма для изображения в оттенках серого. Гистограмма отображает, сколько пикселей на изображении имеют различные уровни яркости (от 0 до 255).
            </p>
        </section>

        <section>
            <h2>Гистограмма для цветных изображений</h2>
            <p>
                Для цветных изображений можно построить гистограмму для каждого из цветовых каналов (например, для каналов BGR в OpenCV). В этом случае, для каждого канала изображения будет вычислена отдельная гистограмма.
            </p>
            <pre><code>
# Загружаем цветное изображение
image = cv2.imread('image.jpg')

# Разделяем изображение на три канала BGR
blue, green, red = cv2.split(image)

# Вычисляем гистограмму для каждого канала
hist_blue = cv2.calcHist([blue], [0], None, [256], [0, 256])
hist_green = cv2.calcHist([green], [0], None, [256], [0, 256])
hist_red = cv2.calcHist([red], [0], None, [256], [0, 256])

# Отображаем гистограммы для каждого канала
plt.plot(hist_blue, color='blue', label='Синий канал')
plt.plot(hist_green, color='green', label='Зелёный канал')
plt.plot(hist_red, color='red', label='Красный канал')
plt.legend()
plt.title('Гистограммы для каждого канала BGR')
plt.xlabel('Интенсивность пикселей')
plt.ylabel('Частота')
plt.show()
            </code></pre>
            <img src="photo/example3.jpg" alt="Сепарабельное размытие" width="500">
            <img src="photo/w2.png" alt="Сепарабельное размытие" width="500">
            <p>
                В данном примере мы строим гистограммы для каждого из каналов изображения (синий, зелёный и красный) и отображаем их на одном графике. Каждый канал будет иметь свою гистограмму, и каждый будет иметь диапазон значений от 0 до 255.
            </p>
        </section>

        <section>
            <h2>Нормализация гистограммы</h2>
            <p>
                Иногда полезно нормализовать гистограмму для того, чтобы привести её значения в диапазон от 0 до 1. Это помогает визуализировать распределение пикселей без привязки к масштабу.
            </p>
            <p>
                Для нормализации гистограммы можно использовать функцию <code>cv2.normalize()</code>. Она преобразует значения гистограммы, чтобы они находились в указанном диапазоне.
            </p>
            <pre><code>
# Нормализуем гистограмму
cv2.normalize(hist, hist, 0, 1, cv2.NORM_MINMAX)

# Отображаем нормализованную гистограмму
plt.plot(hist)
plt.title('Нормализованная гистограмма')
plt.xlabel('Интенсивность пикселей')
plt.ylabel('Частота')
plt.show()
            </code></pre>
            <p>
                В этом примере нормализуется гистограмма, чтобы значения лежали в диапазоне от 0 до 1, что помогает в анализе и визуализации.
            </p>
        </section>

        <section>
            <h2>Равномерное распределение гистограммы</h2>
            <p>
                Иногда нужно изменить гистограмму изображения таким образом, чтобы она была более равномерной. Это может быть полезно для улучшения контраста, что часто используется в методах повышения контраста, например, в гистограммной коррекции.
            </p>
            <p>
                В OpenCV есть функция <code>cv2.equalizeHist()</code>, которая применяет гистограммную коррекцию для улучшения контраста изображения.
            </p>
            <pre><code>
# Применяем гистограммную коррекцию
equalized_image = cv2.equalizeHist(image)

# Отображаем результат
plt.imshow(equalized_image, cmap='gray')
plt.title('После коррекции гистограммы')
plt.show()
            </code></pre>
            <p>
                Эта функция улучшает контраст изображения, распределяя интенсивности пикселей более равномерно, что полезно для улучшения видимости деталей на изображении.
            </p>
        </section>

        <section>
            <h2>Использование гистограммы для обработки изображений</h2>
            <p>
                Гистограммы изображений могут быть полезны в различных задачах обработки изображений, таких как:
            </p>
            <ul>
                <li><strong>Повышение контраста:</strong> Использование гистограммной коррекции для улучшения контраста.</li>
                <li><strong>Удаление шума:</strong> Гистограммы помогают анализировать распределение шума на изображении.</li>
                <li><strong>Анализ изображений:</strong> Гистограммы позволяют анализировать распределение цветов и яркости.</li>
            </ul>
            <p>
                В совокупности, знание гистограммы изображения позволяет выполнить более точную настройку фильтров, коррекцию цвета и другие операции.
            </p>
        </section>
        <section id="navigation">
            <h2>Дальнейшее изучение</h2>
            <p><a href="colibrovka.html">Перейти к разделу "Калибровка изображений".</a></p>
        </section>
    </main>
</body>
</html>